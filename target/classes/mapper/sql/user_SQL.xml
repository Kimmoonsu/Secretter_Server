<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="sample">
	
	<select id="selectMemberList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    *
			FROM
			   user
		]]>
	</select>
	<select id="selectLetterList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    *
			FROM
			   letter_tb
		]]>
	</select>
	<select id="selectFindLetter" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    *
			FROM
			   letter_tb
			WHERE
				from_id=#{from_id}
		]]>
	</select>
	<select id="selectLetterPK" resultType="Integer">
		<![CDATA[
			SELECT
			    max(letter_id)+1
			FROM
			   letter_tb
		]]>
	</select>
	<select id="selectFindRegister" parameterType="String" resultType="String">
		<![CDATA[
			SELECT
			    register_id
			FROM
			   user
			WHERE
				id=#{to_id}
		]]>
	</select>
	
	<insert id="insertMember" parameterType="hashmap">
		<![CDATA[
			INSERT IGNORE 
				INTO user(
			    	id,
			    	name,
			    	register_id
			    	)
				VALUES(
					#{id},
			    	#{name},
			    	#{register_id}
			    )
		]]>
	</insert>	
	<insert id="insertLetter" parameterType="hashmap">
		<![CDATA[
			INSERT
				INTO letter_tb(
			    	to_id,
			    	to_name,
			    	from_id,
			    	from_name,
			    	address,
			    	latitude,
			    	longitude,
			    	content,
			    	read_state
			    	)
				VALUES(
			    	#{to_id},
			    	#{to_name},
			    	#{from_id},
			    	#{from_name},
			    	#{address},
			    	#{latitude},
			    	#{longitude},
			    	#{content},
			    	#{read_state}
			    )
		]]>
	</insert>	
	
	<update id="updateStamp" parameterType="hashmap">
		<![CDATA[
			UPDATE
				user
			SET
				name=#{name}
			WHERE
				id=#{id}
		]]>
	</update>	
	
	
	
	<delete id="deleteMember" parameterType="hashmap">
		<![CDATA[
			DELETE FROM
				user
			WHERE
				id=#{id}
		]]>
	</delete>	
	
	<delete id="deleteLetter" parameterType="hashmap">
		<![CDATA[
			DELETE FROM
				letter_tb
			WHERE
				letter_id=#{letter_id}
		]]>
	</delete>	
	
	
	
	
	
	
</mapper>
